HW3
================
Zhenkun Fang
2024-10-14

# Problem 1

This dataset consists of 2595176 rows and 7 columns. The variables
include the weather station ID, observation date, precipitation
(measured in tenths of millimeters), snowfall (in millimeters), snow
depth (in millimeters), and both minimum and maximum temperatures (in
tenths of degrees Celsius).

``` r
ny_noaa %>% 
  count(tmax) %>%
  arrange(desc(n))
```

    ## # A tibble: 533 × 2
    ##    tmax        n
    ##    <chr>   <int>
    ##  1 <NA>  1134358
    ##  2 256     30736
    ##  3 267     30692
    ##  4 244     28909
    ##  5 239     28628
    ##  6 233     27902
    ##  7 250     27392
    ##  8 228     27342
    ##  9 261     26654
    ## 10 278     26355
    ## # ℹ 523 more rows

``` r
ny_noaa %>% 
  count(tmin) %>%
  arrange(desc(n))
```

    ## # A tibble: 549 × 2
    ##    tmin        n
    ##    <chr>   <int>
    ##  1 <NA>  1134420
    ##  2 0       32431
    ##  3 -11     31385
    ##  4 6       30763
    ##  5 -22     30502
    ##  6 -17     30163
    ##  7 -6      28909
    ##  8 17      28771
    ##  9 100     27891
    ## 10 128     27391
    ## # ℹ 539 more rows

For vairbles `tmax` and `tmin`, nearly half of the observations are
`NA`, indicating that there is a serious issue of missing data.

``` r
ny_noaa %>% 
  count(snow) %>%
  arrange(desc(n))
```

    ## # A tibble: 282 × 2
    ##     snow       n
    ##    <int>   <int>
    ##  1     0 2008508
    ##  2    NA  381221
    ##  3    25   31022
    ##  4    13   23095
    ##  5    51   18274
    ##  6    76   10173
    ##  7     8    9962
    ##  8     5    9748
    ##  9    38    9197
    ## 10     3    8790
    ## # ℹ 272 more rows

``` r
ny_noaa = 
  ny_noaa %>% 
  separate(date, into = c("year", "month", "day"), convert = TRUE) %>% 
  mutate(
    tmax = as.numeric(tmax),
    tmin = as.numeric(tmin))
```

For the variable `snow`, the most frequently observed value is 0,
reflecting that snowfall does not occur on most days in NY. The second
most common value is `NA`, indicating missing data.

``` r
ny_noaa %>% 
  group_by(id, year, month) %>% 
  filter(month %in% c(1, 7)) %>% 
  summarize(mean_tmax = mean(tmax, na.rm = TRUE, color = id)) %>% 
  ggplot(aes(x = year, y = mean_tmax, group = id)) + geom_point() + geom_path() +
  facet_grid(~month) +
  labs(title = "Mean monthly temperature for each station across years for January and July",
       x = "Year",
       y = "Average max temperature")
```

    ## `summarise()` has grouped output by 'id', 'year'. You can override using the
    ## `.groups` argument.

<img src="p8105_hw3_zf2352_files/figure-gfm/two-panel plot-1.png" width="90%" />

The two-panel plot below displays the average maximum temperature in
January and July across stations over the years. As expected, the mean
temperature in January is significantly lower than in July for all
stations and years. The stations generally follow similar temperature
patterns, with peaks and valleys within each month across the years—when
one station has a high monthly mean temperature for a given year, most
other stations exhibit a similar trend. However, there is one notably
cold station in July of 1987 or 1988, along with a few other less
extreme outliers.

``` r
hex = 
  ny_noaa %>% 
  ggplot(aes(x = tmin, y = tmax)) + 
  geom_hex()

ridge = 
  ny_noaa %>% 
  filter(snow < 100, snow > 0) %>% 
  ggplot(aes(x = tmax, y = as.factor(year))) + 
  geom_density_ridges(scale = .90)
  
hex+ridge
```

    ## Picking joint bandwidth of 8.06

<img src="p8105_hw3_zf2352_files/figure-gfm/another two-panel plot-1.png" width="90%" />

# Problem 2
